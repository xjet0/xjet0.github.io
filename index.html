<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JetX-style Crash Demo (truqu√©)</title>
  <style>
    :root{
      --bg:#0b1020; --card:#121832; --muted:#9aa4c7; --text:#e9edff;
      --accent:#7aa2ff; --good:#4ade80; --warn:#facc15; --bad:#fb7185; --purple:#c084fc;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Noto Sans",sans-serif;
      color:var(--text);
      background: radial-gradient(1200px 600px at 20% 10%, #1b2150 0%, #0b1020 55%, #070a16 100%);
      display:flex; align-items:center; justify-content:center; padding:20px;
    }
    .app{width:min(1100px,100%);}
    .grid{display:grid; grid-template-columns:1.2fr 1fr; gap:18px}
    @media (max-width: 960px){ .grid{grid-template-columns:1fr;}}
    .card{background:linear-gradient(180deg,#121832 0%, #0f1530 100%);
      border:1px solid #20274f; border-radius:18px; box-shadow:0 10px 30px rgba(0,0,0,.35)}
    .card h2{margin:0 0 10px; font-size:20px; color:#ced6ff}
    .pane{padding:18px}
    .topbar{display:flex; align-items:center; justify-content:space-between; margin-bottom:12px}
    .brand{font-weight:700; letter-spacing:.4px}
    .muted{color:var(--muted)}
    .arena{position:relative; height:420px; overflow:hidden; border-radius:16px; background:
      radial-gradient(900px 220px at 70% 120%, rgba(122,162,255,.25), transparent 60%),
      radial-gradient(700px 250px at 30% -30%, rgba(192,132,252,.20), transparent 60%),
      linear-gradient(180deg, #0e1430 0%, #0a0f25 100%);
    }
    .ground{position:absolute; inset:auto 0 0 0; height:48px; background:linear-gradient(180deg,#10163a,#0b1028); border-top:1px solid #1b2454}
    .mult{position:absolute; left:18px; top:16px; font-weight:800; font-size:42px; text-shadow:0 10px 30px rgba(0,0,0,.5)}
    .status{position:absolute; right:16px; top:16px; font-weight:600}
    .status.play{color:var(--warn)}
    .status.crash{color:var(--bad)}
    .status.cashed{color:var(--good)}
    .rocket{position:absolute; left:50%; transform:translateX(-50%); width:56px; height:56px;}
    .trail{position:absolute; left:50%; bottom:0; width:4px; transform:translateX(-50%);
      background:linear-gradient(180deg, rgba(250,204,21,.95), rgba(250,204,21,.05));
      box-shadow:0 0 18px rgba(250,204,21,.65); border-radius:2px;}
    .controls{display:grid; grid-template-columns:1fr 1fr; gap:12px}
    .row{display:flex; gap:10px; align-items:center}
    label{font-size:13px; color:#b8c2ef}
    input[type="number"]{width:100%; padding:10px 12px; border-radius:12px;
      background:#0e1430; border:1px solid #20274f; color:#e9edff;}
    .btn{appearance:none; border:none; border-radius:14px; padding:12px 14px; font-weight:700; cursor:pointer;
      background:#182049; color:#e9edff; border:1px solid #24306b;}
    .btn.primary{background:linear-gradient(180deg,#6e8cff,#4b6bff);}
    .btn.good{background:linear-gradient(180deg,#34d399,#22c55e);}
    .btn.ghost{background:#0f1530}
    .btn[disabled]{opacity:.5; cursor:not-allowed}
    .stats{display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:10px}
    .tile{padding:12px 14px; background:#0e1430; border:1px solid #20274f; border-radius:14px}
    .tile .val{font-weight:800; font-size:20px}
    .history{display:flex; flex-wrap:wrap; gap:8px; margin-top:8px}
    .chip{padding:6px 10px; border-radius:999px; font-weight:700; font-size:13px; border:1px solid #223169; background:#0b1235}
    .chip.g{color:var(--good); border-color:rgba(74,222,128,.4)}
    .chip.p{color:var(--purple); border-color:rgba(192,132,252,.45)}
    .chip.r{color:var(--bad); border-color:rgba(251,113,133,.45)}
    .foot{display:flex; align-items:center; justify-content:space-between; padding:14px; border-top:1px dashed #20274f; font-size:13px; color:#aab3db}
  </style>
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div class="brand">üöÄ JetX-style Crash <span class="muted">(d√©mo truqu√©e)</span></div>
      <div class="muted">HTML ‚Ä¢ CSS ‚Ä¢ JS</div>
    </div>
    <div class="grid">
      <div class="card">
        <div class="pane"><h2>Ar√®ne</h2></div>
        <div class="arena" id="arena">
          <div class="mult" id="mult">1.00√ó</div>
          <div class="status muted" id="status">Pr√™t</div>
          <svg class="rocket" id="rocket" viewBox="0 0 64 64">
            <path d="M32 4c8 6 12 16 12 24 0 10-12 28-12 28S20 38 20 28c0-8 4-18 12-24z" fill="#5e7bff" stroke="#2a3a7a" stroke-width="2"/>
            <circle cx="32" cy="24" r="5" fill="#0e1430" stroke="#2a3a7a" stroke-width="2"/>
            <path d="M24 38l-6 6 10 2z" fill="#6b7280"/>
            <path d="M40 38l6 6-10 2z" fill="#6b7280"/>
          </svg>
          <div class="trail" id="trail" style="height:0"></div>
          <div class="ground"></div>
        </div>
        <div class="foot">üí° Retire avant le crash. D√©mo visuelle truqu√©e.</div>
      </div>
      <div class="card">
        <div class="pane"><h2>Contr√¥les</h2>
          <div class="controls">
            <div class="tile">
              <div class="row"><label for="stake">Mise (‚ö™Ô∏é)</label><input id="stake" type="number" min="1" step="1" value="50"/></div>
              <div class="row"><label>Auto cash-out</label><input id="auto" type="checkbox"/><input id="autoAt" type="number" value="2" step="0.1" min="1"/></div>
              <div class="row"><button class="btn primary" id="startBtn">‚ñ∂Ô∏è Lancer</button><button class="btn good" id="cashBtn" disabled>üí∏ Retirer</button><button class="btn ghost" id="resetBtn">‚Ü∫ Reset</button></div>
            </div>
            <div class="tile">
              <div class="muted">Solde</div><div class="val" id="balance">1000 ‚ö™Ô∏é</div>
              <div class="stats">
                <div class="tile"><div class="muted">√âtat</div><div class="val" id="roundState">Pr√™t</div></div>
                <div class="tile"><div class="muted">Crash pr√©vu</div><div class="val" id="crashAt">‚Äî</div></div>
              </div>
              <div class="muted">Historique</div><div class="history" id="history"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
const $ = sel => document.querySelector(sel);
const fmt = x => Number(x).toFixed(2);
function mulberry32(a){return function(){let t=a+=0x6D2B79F5;t=Math.imul(t^t>>>15,t|1);t^=t+Math.imul(t^t>>>7,t|61);return ((t^t>>>14)>>>0)/4294967296}}
let seed=(crypto.getRandomValues(new Uint32Array(1))[0])>>>0, rng=mulberry32(seed);

const multEl=$("#mult"),statusEl=$("#status"),rocketEl=$("#rocket"),trailEl=$("#trail"),
stakeEl=$("#stake"),autoEl=$("#auto"),autoAtEl=$("#autoAt"),startBtn=$("#startBtn"),
cashBtn=$("#cashBtn"),resetBtn=$("#resetBtn"),balanceEl=$("#balance"),
crashAtEl=$("#crashAt"),roundStateEl=$("#roundState"),historyEl=$("#history"),arenaEl=$("#arena");

let balance=1000,inRound=false,crashed=false,cashed=false,currentMult=1,crashPoint=null,startedAt=0,raf=null,stakeLocked=0;
const SPEED=1.15;

function updateBalance(){balanceEl.textContent=`${Math.max(0,Math.round(balance))} ‚ö™Ô∏é`;}
function setStatus(txt,cls){statusEl.textContent=txt;statusEl.className=`status ${cls||''}`;roundStateEl.textContent=txt;}
function setMult(x){currentMult=x;multEl.textContent=`${fmt(x)}√ó`;}
function pushHistory(x){const chip=document.createElement("div");chip.className="chip "+(x>=10?"p":x>=2?"g":"r");chip.textContent=`${fmt(x)}√ó`;historyEl.prepend(chip);while(historyEl.children.length>10)historyEl.removeChild(historyEl.lastChild);}

function sampleCrash(playerTarget=null){
  const r=rng();
  if(playerTarget){
    if(r<0.7) return Math.max(1.01, playerTarget-(0.1+r*0.2)); // perd juste avant
    if(r<0.9) return 1+r*1.5; // crash <2√ó
    return 10+r*90; // jackpot rare
  }
  if(r<0.6) return 1+r*1.3;
  if(r<0.9) return 2+(r-0.6)*10;
  return 10+(r-0.9)*200;
}

function placeBet(){
  const stake=Math.max(1,Math.floor(Number(stakeEl.value)||0));
  if(stake>balance){alert("Solde insuffisant.");return null;}
  balance-=stake;updateBalance();return stake;
}

function startRound(){
  if(inRound)return;
  const s=placeBet();if(s==null)return;
  stakeLocked=s;crashed=false;cashed=false;inRound=true;
  const target=autoEl.checked?Number(autoAtEl.value):null;
  crashPoint=sampleCrash(target);
  crashAtEl.textContent=`${fmt(crashPoint)}√ó`;
  setMult(1.0);setStatus("En cours‚Ä¶","play");
  startedAt=performance.now();
  stakeEl.disabled=autoEl.disabled=autoAtEl.disabled=startBtn.disabled=true;
  cashBtn.disabled=false;
  loop();
}

function loop(){
  raf=requestAnimationFrame(loop);
  const t=(performance.now()-startedAt)/1000;
  const m=Math.exp(SPEED*t);
  setMult(m);
  const arenaH=arenaEl.clientHeight-56-48;
  const progress=Math.min(1,Math.log(m)/Math.log(crashPoint));
  rocketEl.style.bottom=`${48+(progress*arenaH)}px`;
  trailEl.style.height=`${(progress*arenaH)}px`;
  if(!cashed&&autoEl.checked&&m>=Number(autoAtEl.value))doCashout();
  if(m>=crashPoint)onCrash();
}

function onCrash(){
  if(!inRound)return;
  cancelAnimationFrame(raf);inRound=false;crashed=true;
  setMult(crashPoint);setStatus("CRASH üí•","crash");
  pushHistory(crashPoint);cashBtn.disabled=true;startBtn.disabled=false;
  stakeEl.disabled=autoEl.disabled=false;autoAtEl.disabled=!autoEl.checked;
}

function doCashout(){
  if(!inRound||crashed||cashed)return;
  cashed=true;
  const payout=stakeLocked*currentMult;
  balance+=Math.floor(payout);
  updateBalance();
  setStatus(`Retir√© √† ${fmt(currentMult)}√ó ‚úÖ`,"cashed");
  cashBtn.disabled=true;
}

function resetAll(){
  if(inRound)cancelAnimationFrame(raf);
  inRound=false;crashed=false;cashed=false;
  setMult(1.0);setStatus("Pr√™t","");crashPoint=null;crashAtEl.textContent="‚Äî";
  stakeEl.disabled=autoEl.disabled=autoAtEl.disabled=false;cashBtn.disabled=true;startBtn.disabled=false;
  seed=(crypto.getRandomValues(new Uint32Array(1))[0])>>>0;rng=mulberry32(seed);
}

startBtn.addEventListener("click",startRound);
cashBtn.addEventListener("click",doCashout);
resetBtn.addEventListener("click",resetAll);
autoEl.addEventListener("change",()=>{autoAtEl.disabled=!autoEl.checked;});
updateBalance();autoAtEl.disabled=true;
</script>
</body>
</html>
